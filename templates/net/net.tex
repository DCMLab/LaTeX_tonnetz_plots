\documentclass{standalone}

\usepackage{pgfmath}
\usepackage[usenames,dvipsnames,table]{xcolor}
\usepackage{xstring}
\usepackage{ifthen}
\usepackage{tikz}
\usetikzlibrary{
  shapes, % for hexagons
  calc    % perform calculations within TikZ
}

\begin{document}

%%%% DEFINITIONS

% declare layers and specify ordering
\pgfdeclarelayer{bbg}       % behind background
\pgfdeclarelayer{bg}        % background
\pgfdeclarelayer{main}      % main layer
\pgfdeclarelayer{fg}        % foreground
\pgfdeclarelayer{bfg}       % before foreground
\pgfsetlayers{bbg,bg,main,fg,bfg}

% adjust size
\def\minx{-3}   % descending perfect fifths from C = 0
\def\maxx{3}    % ascending perfect fifths from C = 0
\def\miny{-3}   % descending major thirds from C = 0
\def\maxy{3}    % ascending major thirds from C = 0

% Diatonics
\def\diatonic{F, C, G, D, A, E, B}
\def\doubleflats{F$\flat\flat$, C$\flat\flat$, G$\flat\flat$, D$\flat\flat$, A$\flat\flat$, E$\flat\flat$, B$\flat\flat$}
\def\flats{F$\flat$, C$\flat$, G$\flat$, D$\flat$, A$\flat$, E$\flat$, B$\flat$}
\def\sharps{F$\sharp$, C$\sharp$, G$\sharp$, D$\sharp$, A$\sharp$, E$\sharp$, B$\sharp$}
\def\doublesharps{F$\sharp\sharp$, C$\sharp\sharp$, G$\sharp\sharp$, D$\sharp\sharp$, A$\sharp\sharp$, E$\sharp\sharp$, B$\sharp\sharp$}
% get accidentals
% if divmod(z,7) = 0 => ""
% else if divmod(z,7)< 0 => res * \flat
% else if divmod(z,7) > 0 => res * \sharp

% line of fifths
\newcommand*{\LoF}{\doubleflats,\flats,\diatonic,\sharps,\doublesharps}

% Tonnetz coordinates in x=fifths and y=major thirds
\newcommand*{\xycoord}[2]{($#1*(1,0)+#2*(60:1)$)}

% access lists by index
\newcommand*\GetItem[2]{\StrBetween[#2,\number\numexpr#2+1]{,#1,},,\par}%

% \newcommand*{\Triad}[3]{\draw [fill=orange!4] ({#1}) -- (0,1) -- (1,0) -- cycle;}
% \newcommand*{\Arrow}[2]{\draw [->, >=stealth, thick] (0,0) -- (0,1);}

%%%% STYLES

\tikzstyle{tone}=[circle, draw=black, fill=white,align=center, minimum size=3em, thick]
\tikzstyle{interval}=[draw=black,ultra thick]
\tikzstyle{hexagon}=[draw=black!9, fill=black!4,regular polygon, regular polygon sides=6, rotate=30, thick]

\begin{tikzpicture}[scale=2]
    \foreach \x in {\minx, ..., \maxx} {
        \foreach \y [evaluate=\y as \z using {int(\x+4*\y+16)}] in {\miny, ..., \maxy} { 

            %%% get label
            \def\l{\GetItem{\LoF}{\z}}

            % draw labels (pitch classes)
            \begin{pgfonlayer}{fg}
                \node [tone] at \xycoord{\x}{\y} {\l};
            \end{pgfonlayer}

            %%% draw hexagons
            \begin{pgfonlayer}{bg}
                \node[hexagon,scale=5.8] at \xycoord{\x}{\y} {};
            \end{pgfonlayer}

            %%% draw intervals
            \begin{pgfonlayer}{main}
                \ifthenelse{\x<\maxx-1}{
                    \draw [interval] \xycoord{\x}{\y} -- \xycoord{\x+1}{\y}; % P5s
                }{}
                \ifthenelse{\y<\maxy}{
                    \draw [interval] \xycoord{\x}{\y} -- \xycoord{\x}{\y+1}; % M3s
                }{}
                \ifthenelse{\x>\minx\AND\y<\maxy}{
                    \draw [interval] \xycoord{\x}{\y} -- \xycoord{\x-1}{\y+1}; % m3s
                }{}
            \end{pgfonlayer}
        }
    }

\end{tikzpicture}

\end{document}